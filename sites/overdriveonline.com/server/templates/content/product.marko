import { getAsArray } from "@base-cms/object-path";

$ const { id, type, pageNode, ...rest } = input;

<global-content-product-layout
  id=id
  type=type
  page-node=pageNode
  ...rest
>
  <@right-rail|{ content }|>
    <global-gam-define-display-ad
      name="rotation-1"
      pos="content_page"
      aliases=["gear"]
      modifiers=["max-width-300", "center", "margin-auto-x", "rail"]
      class="mb-block"
    />
    $ const labels = getAsArray(content, "labels");
    <if(labels.includes("Sponsored by RoadPro"))>
      <site-road-pro-facebook />
    </if>
  </@right-rail>
  <@after-body|{ content }|>
    <global-more-gear-block alias="gear" params={ excludeContentIds: [content.id] } />
  </@after-body>

  <@section>
    <global-callout-cards-block>
      <@slot>
        <global-ccj-top-250-block />
      </@slot>
      <@slot>
        <global-ovd-pib-manual-promo-block />
      </@slot>
    </global-callout-cards-block>
  </@section>

  <@section>
    <global-client-side-most-popular-block />
  </@section>
</global-content-product-layout>
